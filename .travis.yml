# AUTO-GENERATED BY tox2travis.py -- DO NOT EDIT THIS FILE BY HAND!

dist: xenial
language: python

cache: pip

jobs:
  include:
    - python: "3.8"
      env: TOXENV=towncrier,twine,check-manifest,flake8,docs
    - python: "2.7"
      env: TOXENV=py27-twisted_lowest,py27-twisted_latest
    - python: "3.5"
      env: TOXENV=py35-twisted_lowest,py35-twisted_latest
    - python: "3.6"
      env: TOXENV=py36-twisted_lowest,py36-twisted_latest
    - python: "3.7"
      env: TOXENV=py37-twisted_lowest,py37-twisted_latest
    - python: "3.8"
      env: TOXENV=py38-twisted_latest
    - python: "pypy"
      env: TOXENV=pypy-twisted_lowest,pypy-twisted_latest
    - python: "pypy3"
      env: TOXENV=pypy3-twisted_latest
    - python: "pypy3"
      env: TOXENV=pypy3-twisted_trunk-pyopenssl_trunk
      if: branch = master
    - python: "3.5"
      env: TOXENV=py35-twisted_trunk-pyopenssl_trunk
      if: branch = master
    - python: "3.6"
      env: TOXENV=py36-twisted_trunk-pyopenssl_trunk
      if: branch = master
    - python: "3.7"
      env: TOXENV=py37-twisted_trunk-pyopenssl_trunk
      if: branch = master
    - python: "3.8"
      env: TOXENV=py38-twisted_trunk-pyopenssl_trunk
      if: branch = master

  # Don't fail on trunk versions.
  allow_failures:
    - env: TOXENV=pypy3-twisted_trunk-pyopenssl_trunk
    - env: TOXENV=py35-twisted_trunk-pyopenssl_trunk
    - env: TOXENV=py36-twisted_trunk-pyopenssl_trunk
    - env: TOXENV=py37-twisted_trunk-pyopenssl_trunk
    - env: TOXENV=py38-twisted_trunk-pyopenssl_trunk

before_install:
  - pip install --upgrade pip
  - pip install --upgrade setuptools

install:
  - pip install tox coveralls

script:
  - tox

after_success:
  - coverage combine
  - coveralls

after_failure:
  - |
    if [[ -f "_trial_temp/httpbin-server-error.log" ]]
    then
        echo "httpbin-server-error.log:"
        cat "_trial_temp/httpbin-server-error.log"
    fi

notifications:
  email: false

branches:
  only:
    - master

# AUTO-GENERATED BY tox2travis.py -- DO NOT EDIT THIS FILE BY HAND!
